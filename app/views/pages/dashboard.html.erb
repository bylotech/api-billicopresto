<% if current_retailer %>
	
	<div class="home-organizer">

		<div class="navbar-retailer d-flex">
			<div class="navbar-left d-flex">
			<%= image_tag "logo-bylo-w.svg", alt: "bylo logo", class: "logo-retailer"%>
			</div>
			<div class="navbar-right d-flex">
				<%= mail_to "bylo.developpers@gmail.com", "Besoin d'assistance ?", style: "z-index: 1000; font-size: 12px;"  %>
			</div>
		</div>

		<div class="retailler-home-wrapper">
			<div class="retailler-home-info text-center align-middle">
				<p class="number-stat"> <%= current_retailer.tills.length %> </p> 
				<p> caisses en activit√©</p>
				<%= link_to vouchers_path do %>
					<p class="see-more"> Voir plus <i class="fas fa-chevron-right"></i> </p>
				<% end %>
			</div>
			<div class="retailler-home-info text-center align-middle">
				<p class="number-stat"> <%= current_retailer.receipts.length %> </p> 
				<p> tickets de caisse actifs</p>
				<%= link_to vouchers_path do %>
					<p class="see-more"> Voir plus <i class="fas fa-chevron-right"></i> </p>
				<% end %>
			</div>
			<div class="retailler-home-info text-center align-middle">
				<p class="number-stat"> <%= current_retailer.vouchers.length %> </p> 
				<p> bons de r√©duction actifs </p>
				<%= link_to vouchers_path do %>
					<p class="see-more"> Voir plus <i class="fas fa-chevron-right"></i> </p>
				<% end %>
			</div>
		</div>

		<%  def terre_lune_width(ticket_actif)

				terre_lune = 38440000000
				ticket_moyen = 40

				ticket_length = (ticket_actif * ticket_moyen)

				return rapport = (ticket_length*100).fdiv(terre_lune)
				
			end

			def width

				size = (60 * terre_lune_width(current_retailer.receipts.length)).round

				if size < 10
					return "1vw"
				elsif size > 60
					return "60vw"
				else 
					return size.to_s + "vw"
				end 

			end

		%>
		
		<div class="terre-lune">

			<p class="pb-3"><strong> Bravo ! </strong><%= current_retailer.name %>, <%= current_retailer.city %> a √©conomis√© en moyenne <%= (40 * current_retailer.receipts.length).fdiv(1000) %> km de papier, <br> soit <%= terre_lune_width(current_retailer.receipts.length).round(2) if terre_lune_width(current_retailer.receipts.length).round(2) > 0.1 %> <%= "moins de 0.1" if terre_lune_width(current_retailer.receipts.length).round(2) <= 0.1 %> % de la distance Terre-Lune. </p>
			<div class="terre-lune-wrapper d-flex">

				<div class="d-flex terre-line">
					<div class="terre"></div>
					<div class="line"><hr style="width: <%= width %>"></div>
					<div class="line"><hr style="width: 60vw; opacity: 0.2 !important"></div>
				</div>

				<div class="lune"></div>

			</div>
		</div>

	</div>

<% elsif @user == nil %>

	<div class="welcome profile">

		<h2>Welcome to</h2>
		<%= image_tag "logo-bylo-w.svg", alt: "bylo logo", class: "logo"%>

	</div>

	<div class="registration">
		<%= link_to "Devenez un bylower ü§ô", new_user_registration_path, class: "rounded-button" %>
		<%= link_to "J'ai d√©j√† un compte üòé", new_user_session_path, class: "rounded-button" %>
	</div>
	
<% else %>

	<div class="profile">
		<i class="far fa-user"></i>
		<% if @user.first_name != nil %>
		<h2><%= @user.first_name %> <%= @user.last_name.upcase %> </h2>
		<% end %>
	</div>

	<div class="button-group">
		<div class="button">
			<%= link_to "Compl√©ter mon profil", edit_user_registration_path %>
		</div>
		<div class="button">
			<p>G√©rer mes moyens de paiement</p>
		</div>
		<div class="button">
			<p>Ajouter et g√©rer un compte</p>
		</div>
		<div class="button">
			<p>Pr√©f√©rences</p>
		</div>
		<div class="button">
			<p>S√©curit√©</p>
		</div>
	</div>

	<div class="button-group">
		<div class="button">
			<%= link_to "D√©connexion", destroy_user_session_path, method: :delete, class: "btn-red" %>
		</div>
	</div>

<% end %>